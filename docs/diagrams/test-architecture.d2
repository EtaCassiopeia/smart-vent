direction: down

integration: "Integration Tests\nHub CLI -> CoAP -> Simulator\n(tests/integration/)" {
  style.stroke: "#e68a00"
}

hub_tests: "Hub Unit Tests\n34 tests with mocked CoAP\n(hub/tests/)" {
  style.stroke: "#3a7bd5"
}

firmware_tests: "Firmware Unit Tests\n5 host-side tests (cargo test)\nState machine + CBOR roundtrip" {
  style.stroke: "#2ecc71"
}

integration -> hub_tests: depends on
hub_tests -> firmware_tests: depends on

simulator: Device Simulator {
  style.stroke: "#9b59b6"

  cmd: "vent-sim start --count 5"
  detail: "5 virtual vents on ports 5683-5687\nFull CoAP resource tree, in-memory state\nHub and HA cannot tell them from real devices"
}

integration -> simulator: uses {
  style.stroke-dash: 3
}
